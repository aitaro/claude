# Linear タスク開始コマンド

このコマンドは Linear のタスクを開始する際に、自動的に Git ブランチを作成し、タスクと関連付けます。

## 使用方法

```
/start-task <linear-task-id> [追加の指示]
```

例:

- `/start-task ENG-123`
- `/start-task MOBL-3455 テストも追加で実装`
- `/start-task XXX-YYY mainブランチからではなく開発ブランチから作成`

## 実行内容

追加の指示がある場合は、それに応じて以下の処理を調整します。

1. **現在のブランチと状態を確認**

   - 未コミットの変更がないことを確認（`git status`）
   - 現在のブランチ名を記録

2. **最新の変更を取得**

   - main ブランチの最新状態を取得したい場合

   ```bash
   git fetch origin main
   ```

3. **Linear タスク情報を取得**

   - Linear MCP (mcp**linear**get_issue) を使用してタスク詳細を取得
   - タスクタイトルとステータスを確認

4. **ブランチ作成**

   ```bash
   # mainブランチの最新状態から作成する
   git checkout -b feature/<task-id>-<task-title-slug> origin/main
   ```

   例: `feature/ENG-123-add-user-authentication`

5. **Linear でタスクステータスを更新**

   - タスクを "In Progress" に変更
   - 自分にアサイン（未アサインの場合）

6. **作業開始の準備**

   - 必要に応じて依存関係をインストール
   - 開発サーバーを起動するコマンドを提案

7. **追加の指示の実行**
   - コマンドに追加の指示が含まれている場合、それを実行
   - 例: テストファイルの作成、特定の実装の開始など

## 必要な設定

1. **Linear MCP 接続**

   - Linear MCP サーバーが起動していること
   - MCP 経由で Linear に接続が確立されていること

2. **Git 設定**
   - リモートリポジトリが設定されていること
   - main または master ブランチが存在すること

## オプション

- `--no-fetch`: リモートの最新状態を取得せずにブランチを作成
- `--base <branch>`: 指定したブランチから作成（デフォルト: 現在のブランチ）
- `--from-main`: 明示的に origin/main の最新状態から作成
- `--skip-status`: Linear のステータス更新をスキップ

## エラーハンドリング

- 既にブランチが存在する場合は、そのブランチにチェックアウト
- Linear タスクが見つからない場合は、ブランチ名を手動で入力
- 未コミットの変更がある場合は、stash するか確認を求める
